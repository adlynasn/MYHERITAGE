<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/png" href="media/MYHeritage_Brand.png" />
    <link
      rel="stylesheet"
      href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css"
    />

    <!--Bootstrap-->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    />
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
      rel="stylesheet"
    />
    <link href="resources/css/tiny-slider.css" rel="stylesheet" />
    <link href="resources/css/style.css" rel="stylesheet" />
    <title>User Account</title>
    <style>
      /* Custom styles for the heading */
      h2 {
          font-size: 23px; 
          color: #3f3f3f;
          margin-top: 40px;
      }
      a {
        font-size: 23px; 
          color: #3f3f3f;
          margin-top: 40px;
      }
    /* Style for the "Track My Orders" link */
      .track-orders-link {
        font-size: 16px;
        color: #3f3f3f; /* Blue color for the link */
        text-decoration: none; /* Remove underline */
        margin-left:auto; /* Add some margin to separate it from other elements */
      }

    /* Style for the link on hover */
      .track-orders-link:hover {
        text-decoration: underline; /* Underline the link on hover */
      }
      .change-password-form{
        margin-bottom: 150px;
      }

      
    </style>
  </head>
 
    <body>
        <script type="module" src="/resources/js/main.js"></script>
        <script
          async
          crossorigin="anonymous"
          data-clerk-publishable-key="pk_test_c2V0dGxlZC1taW5ub3ctNjAuY2xlcmsuYWNjb3VudHMuZGV2JA"
          src="https://settled-minnow-60.clerk.accounts.dev/npm/@clerk/clerk-js@4/dist/clerk.browser.js"
          type="text/javascript"
        ></script>
    
        <!-- Start Header/Navigation -->
        <nav
        class="custom-navbar navbar navbar navbar-expand-md navbar-dark bg-dark"
        arial-label="MYHeritage navigation bar"
      >
        <div class="container">
          <a class="navbar-brand" href="index.html"
            >MyHeritage
            <!-- <img src="media/MYHeritage_Logo.png" alt="MyHeritage Logo" /> -->
          </a>
  
          <!-- Mobile Menu Toggle Button -->
          <button
            class="navbar-toggler"
            type="button"
            data-toggle="collapse"
            data-target="#navbarsExampleDefault"
            aria-controls="navbarsExampleDefault"
            aria-expanded="false"
            aria-label="Toggle navigation"
          >
            <span class="navbar-toggler-awesome fas fa-bars"></span>
            <span class="navbar-toggler-awesome fas fa-times"></span>
          </button>
          <!-- end of mobile menu toggle button -->
  
          <button
            class="navbar-toggler"
            type="button"
            data-bs-toggle="collapse"
            data-bs-target="#navbarsFurni"
            aria-controls="navbarsFurni"
            aria-expanded="false"
            aria-label="Toggle navigation"
          >
            <span class="navbar-toggler-icon"></span>
          </button>
  
          <div class="collapse navbar-collapse" id="navbarsFurni">
            <ul class="custom-navbar-nav navbar-nav ms-auto mb-2 mb-md-0">
              <li><a class="nav-link" href="index.html">Home</a></li>
              <li><a class="nav-link" href="#">Shop</a></li>
              <li><a class="nav-link" href="artisan.html">Artisans</a></li>
              <li><a class="nav-link" href="homeAboutUs.html">About Us</a></li>
              <li><a class="nav-link" href="homeContactUs.html">Contact us</a></li>
            </ul>
  
            <ul class="custom-navbar-cta navbar-nav mb-2 mb-md-0 ms-5">
              <li class="nav-item active">
                <a class="nav-link" href="userAccount.html"
                  ><i class="bx bx-user"></i
                ></a>
                <!-- <div id="user-button"></div> -->
              </li>
              <li>
                <a class="nav-link" href="cart.html"><i class="bx bx-cart"></i></a>
              </li>
              <li >
                <a
                  class="nav-link"
                  href="userSignIn.html"
                  style="color: #3b5d50; padding: 10px"
                  >Sign In
                </a>
              </li>
            </ul>
          </div>
        </div>
      </nav>

        <div class="container">
          <div class="d-flex align-items-center">
            <h2 class="me-3">User Profile</h2>
            <a class="track-orders-link" href="trackOrder.html">Track My Orders</a>
        </div>
        
          <!-- User Profile Form Container -->
          <div class="user-profile-form-container">
            <form class="user-profile-form">
                <div class="mb-3">
                    <label for="name" class="form-label">Name</label>
                    <input type="text" class="form-control" id="name" value="Mirza Azhan Bin Hazmirul" readonly>
                  </div>
                <div class="mb-3">
                    <label for="email" class="form-label">Email</label>
                    <input type="email" class="form-control" id= "email" value = "mirzaazhan@gmail.com" readonly>
                </div>
                <div class="mb-3">
                    <label for="phone" class="form-label">Phone</label>
                    <input type="text" class="form-control" id= "phone" value = "0123818067" readonly>
                </div>
                <div class="mb-3">
                    <label for="address" class="form-label">Address</label>
                    <input type="text" class="form-control" id= "address" value = "no.9 jalan aman cheria 4, bandar tropicana aman" readonly>
                </div>
            </form>
        </div>
      
      <!--change password form-->
      <div class="container change-password-form">
        <h2>Change Password</h2>

        <form id="changePasswordForm">
            <!-- Your form fields for changing password -->
            <div class="mb-3">
                <label for="currentPassword" class="form-label">Current Password</label>
                <input type="password" class="form-control" id="currentPassword">
            </div>
            <div class="mb-3">
                <label for="newPassword" class="form-label">New Password</label>
                <input type="password" class="form-control" id="newPassword">
            </div>
            <button type="submit" class="btn btn-secondary">Change Password</button>
            <p id="successMessage"></p>
            <p id="errorMessage"></p>
        </form>

    </div>
    
    <footer class="footer-section">
      <div class="container relative">
        <div class="sofa-img">
          <img src="media/MyHeritageHI.png" alt="Image" class="img-fluid" />
        </div>
        

        <div class="row">
          <div class="col-lg-8">
            <div class="subscription-form">
              <h3 class="d-flex align-items-center">
                <span class="me-1"><i class="bx bx-envelope"></i></span
                ><span>Subscribe to Newsletter</span>
              </h3>

              <form action="#" class="row g-3">
                <div class="col-auto">
                  <input
                    type="text"
                    class="form-control"
                    placeholder="Enter your name"
                  />
                </div>
                <div class="col-auto">
                  <input
                    type="email"
                    class="form-control"
                    placeholder="Enter your email"
                  />
                </div>
                <div class="col-auto">
                  <button class="btn">
                    <span class="fa fa-paper-plane"></span>
                  </button>
                </div>
              </form>
            </div>
          </div>
        </div>

        <div class="row g-5 mb-5">
          <div class="col-lg-4">
            <div class="mb-4 footer-logo-wrap">
              <a href="#" class="footer-logo">MyHeritage<span>.</span></a>
            </div>
            <p class="mb-4">
              Donec facilisis quam ut purus rutrum lobortis. Donec vitae odio
              quis nisl dapibus malesuada. Nullam ac aliquet velit. Aliquam
              vulputate velit imperdiet dolor tempor tristique. Pellentesque
              habitant
            </p>

            <ul
              class="list-unstyled custom-social d-flex justify-content-start"
            >
              <li>
                <a href="#"><span class="fa fa-brands fa-facebook-f"></span></a>
              </li>
              <li>
                <a href="#"><span class="fa fa-brands fa-twitter"></span></a>
              </li>
              <li>
                <a href="#"><span class="fa fa-brands fa-instagram"></span></a>
              </li>
              <li>
                <a href="#"><span class="fa fa-brands fa-linkedin"></span></a>
              </li>
            </ul>
          </div>

          <div class="col-lg-8">
            <div class="row links-wrap justify-content-end">
              <div class="col-6 col-sm-6 col-md-3">
                <ul class="list-unstyled">
                  <li><a href="#">About us</a></li>
                  <li><a href="#">Shop</a></li>
                  <li><a href="#">Artisans</a></li>
                  <li><a href="#">Contact us</a></li>
                </ul>
              </div>

              <div class="col-6 col-sm-6 col-md-3">
                <ul class="list-unstyled">
                  <li><a href="#">Support</a></li>
                  <li><a href="#">FAQs</a></li>
                </ul>
              </div>
            </div>
          </div>
        </div>

        <div class="border-top copyright">
          <div class="row pt-4">
            <div class="col-lg-6">
              <p class="mb-2 text-center text-lg-start">
                Copyright &copy;
                <script>
                  document.write(new Date().getFullYear());
                </script>
                . All Rights Reserved. &mdash; MyHeritage
              </p>
            </div>

            <div class="col-lg-6 text-center text-lg-end">
              <ul class="list-unstyled d-inline-flex ms-auto">
                <li class="me-4"><a href="#">Terms &amp; Conditions</a></li>
                <li><a href="#">Privacy Policy</a></li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </footer>
         
      
      <script>
          function toggleEditMode() {
              var editButton = document.getElementById('editButton');
              var saveButton = document.createElement('button');
              saveButton.innerHTML = 'Save';
              saveButton.setAttribute('id', 'saveButton');
              saveButton.setAttribute('class', 'btn btn-primary'); // Change button class
              saveButton.setAttribute('onclick', 'saveChanges()');
              editButton.parentNode.replaceChild(saveButton, editButton);
      
              // Enable input fields for editing
              document.getElementById('name').readOnly = false;
              document.getElementById('email').readOnly = false;
              document.getElementById('phone').readOnly = false;
              document.getElementById('address').readOnly = false;
              
              // Show the file input for changing profile picture
              document.getElementById('profileImage').style.display = 'block';
          }
      
          function saveChanges() {
              // Add logic to save changes here
              // For demonstration purposes, we'll just log a message
              console.log('Changes saved successfully!');
              // After saving changes, you can revert the button back to "Edit Profile"
              var saveButton = document.getElementById('saveButton');
              var editButton = document.createElement('button');
              editButton.innerHTML = 'Edit Profile';
              editButton.setAttribute('id', 'editButton');
              editButton.setAttribute('class', 'btn btn-primary'); // Change button class
              editButton.setAttribute('onclick', 'toggleEditMode()');
              saveButton.parentNode.replaceChild(editButton, saveButton);
      
              // Disable input fields after saving
              document.getElementById('name').readOnly = true;
              document.getElementById('email').readOnly = true;
              document.getElementById('phone').readOnly = true;
              document.getElementById('address').readOnly = true;
  
          }
                document.getElementById('changePasswordForm').addEventListener('submit', async function(event) {
                event.preventDefault();

                const currentPassword = document.getElementById('currentPassword').value;
                const newPassword = document.getElementById('newPassword').value;

                const response = await fetch('/change-password', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ currentPassword, newPassword })
                });

                if (response.ok) {
                  document.getElementById('successMessage').innerText = 'Password has been successfully changed';
                } else {
                    const error = await response.text();
                    document.getElementById('errorMessage').innerText = error;

                }
            }); 
      </script>
</body>
</html>